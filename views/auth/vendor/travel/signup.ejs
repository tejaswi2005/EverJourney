<!-- views/auth/vendor/travel/signup.ejs -->
<% const o = old || {}; %>

<style>
  /* same layout as hotel vendor signup */
  .auth-page { min-height:70vh; display:flex; align-items:center; justify-content:center; padding:3rem 1rem; }
  .auth-card { width:100%; max-width:1020px; display:grid; grid-template-columns:1fr 480px; gap:1.5rem; }
  .auth-visual { background: linear-gradient(180deg,#eef2ff 0%, #ffffff 100%); border-radius:.8rem; padding:2rem; box-shadow:0 10px 30px rgba(2,6,23,0.06); }
  .auth-form { background:#fff; padding:2rem; border-radius:.8rem; box-shadow:0 6px 18px rgba(2,6,23,0.06); max-height:80vh; overflow:auto; }
  .brand { font-weight:700; color:#0b5cff; font-size:1.6rem; }
  .muted { color:#6b7280; }
  .form-control, .form-select { height:44px; border-radius:.6rem; font-size:.9rem; }
  .btn-primary { border-radius:.6rem; padding:.6rem 1rem; }
  .small-note { font-size:.85rem; color:#6b7280; }
  .hr { height:1px; background:#eef2f7; margin:1rem 0; border-radius:2px; }
  .error { background:#fff3f2; border:1px solid #ffd3cf; color:#9b1c1c; padding:.6rem; border-radius:.5rem; margin-bottom:.5rem; font-size:.85rem; }
  .section-label { font-size:.8rem; letter-spacing:.06em; text-transform:uppercase; color:#6b7280; font-weight:600; margin-bottom:.2rem; }
  @media(max-width:1050px) { .auth-card { grid-template-columns: 1fr; } .auth-form{max-height:none;} }
</style>

<section class="container auth-page">
  <div class="auth-card">

    <!-- LEFT PANEL -->
    <div class="auth-visual">
      <div class="brand">EverJourney VendorHub</div>
      <h3 style="margin-top:1rem">Join as Travel Vendor</h3>
      <p class="muted">Create your vendor account to start managing routes, seats and bookings.</p>

      <div style="margin-top:1.6rem;">
        <img src="/assets/vendor-travel-signup.svg" alt="travel vendor signup" style="width:100%; max-width:360px;">
      </div>

      <div class="hr"></div>
      <p class="small-note">
        Already have a travel vendor account?
        <a href="/vendor/travel/login">Sign in here</a>.
        <br>
        Want to book as a user instead?
        <a href="/auth/signup">Create user account</a>.
      </p>
    </div>

    <!-- RIGHT PANEL -->
    <div class="auth-form">
      <h4 class="mb-2">Travel vendor registration</h4>
      <p class="small-note mb-3"><strong>Vendor type:</strong> Travel / Cab partner</p>

      <% if (Array.isArray(errors) && errors.length) { %>
        <% errors.forEach(e => { %><div class="error"><%= e %></div><% }) %>
      <% } %>

      <form id="travelVendorSignupForm" method="post" action="/vendor/travel/signup" novalidate>
        <input type="hidden" name="redirect"
               value="<%= o.redirect || (req && req.query && req.query.redirect) || '' %>">

        <!-- ACCOUNT DETAILS -->
        <div class="section-label">Account details</div>
        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label small">First name</label>
            <input type="text" name="first_name" class="form-control" value="<%= o.first_name || '' %>" required>
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label small">Last name</label>
            <input type="text" name="last_name" class="form-control" value="<%= o.last_name || '' %>">
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label small">Business email</label>
          <input type="email" name="email" class="form-control"
                 value="<%= o.email || '' %>" placeholder="owner@agency.com" required>
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label small">Phone</label>
            <input type="text" name="phone" class="form-control"
                   value="<%= o.phone || '' %>" placeholder="+91 98765 43210">
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label small">Password</label>
            <input type="password" name="password" class="form-control"
                   placeholder="At least 8 characters" required>
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label small">Confirm password</label>
          <input type="password" name="password_confirm" class="form-control" required>
        </div>

        <!-- TRAVEL BUSINESS DETAILS -->
        <div class="section-label mt-2">Travel business details</div>

        <div class="mb-3">
          <label class="form-label small">Business / agency name</label>
          <input type="text" name="provider_name" class="form-control"
                 value="<%= o.provider_name || '' %>" required>
        </div>

        <div class="mb-3">
          <label class="form-label small">Service type</label>
          <select name="provider_type" class="form-select" required>
            <option value="">Select type</option>
            <option value="cab"   <%= o.provider_type === 'cab' ? 'selected' : '' %>>Cab / Taxi</option>
            <option value="bus"   <%= o.provider_type === 'bus' ? 'selected' : '' %>>Bus</option>
            <option value="train" <%= o.provider_type === 'train' ? 'selected' : '' %>>Train</option>
            <option value="tourism" <%= o.provider_type === 'tourism' ? 'selected' : '' %>>Tourism agency</option>
            <option value="other" <%= o.provider_type === 'other' ? 'selected' : '' %>>Other</option>
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label small">Primary service city / route</label>
          <input type="text" name="service_city" class="form-control"
                 value="<%= o.service_city || '' %>" placeholder="e.g., Pune – Mumbai" required>
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label small">Short code (optional)</label>
            <input type="text" name="provider_code" class="form-control"
                   value="<%= o.provider_code || '' %>" placeholder="e.g., EJ-CABS">
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label small">Registration no. (optional)</label>
            <input type="text" name="registration_number" class="form-control"
                   value="<%= o.registration_number || '' %>">
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label small">Vehicle type (optional)</label>
          <input type="text" name="vehicle_type" class="form-control"
                 value="<%= o.vehicle_type || '' %>" placeholder="Sedan, SUV, Traveller, Bus…">
        </div>

        <div class="form-check mb-3 mt-1">
          <input class="form-check-input" type="checkbox" id="travelVendorAcceptTerms"
                 name="accept_terms" value="1" <%= o.accept_terms ? 'checked' : '' %>>
          <label class="form-check-label small" for="travelVendorAcceptTerms">
            I agree to the EverJourney Partner Terms &amp; Conditions.
          </label>
        </div>

        <button type="submit" class="btn btn-primary w-100 mb-2">
          Create travel vendor account
        </button>
      </form>
    </div>

  </div>
</section>

<script>
  (function(){
    const form = document.getElementById('travelVendorSignupForm');
    form?.addEventListener('submit', function(){
      const btn = this.querySelector('button[type="submit"]');
      if (btn) btn.disabled = true;
    });
  })();
</script>
